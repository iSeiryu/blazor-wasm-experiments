@using System.Text.Json
@using BlazorExperiments.UI.Services;
@inherits LayoutComponentBase
@implements IDisposable

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

@code {
    public void Dispose()
    {
        //BrowserResizeService.OnResize -= BrowserHasResized;
    }

    // protected override async Task OnInitializedAsync()
    // {
    //     BrowserResizeService.OnResize += BrowserHasResized;

    //     await JS.InvokeAsync<object>("browserResize.registerResizeCallback");

    //     await GetMedia();
    // }

    // private async Task BrowserHasResized()
    // {
    //     await GetMedia();
    //     StateHasChanged();
    // }

    // private async Task GetMedia()
    // {
    //     var dimensions = await BrowserResizeService.GetWindowProperties(JS);
    //     SetPossibleContentDimensions(dimensions.Width, dimensions.Height);
    // }

    // private void SetPossibleContentDimensions(double windowWidth, double windowHeight)
    // {
    //     possibleContentWidth = windowWidth - (windowWidth <= _mediaMinWidth ? 0 : _sideBarWidth);
    //     possibleContentHeight = (windowHeight - (_topRowHeight * _remToPxRatio));
    // }
}